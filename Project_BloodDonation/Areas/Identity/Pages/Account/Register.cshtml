@page
@model RegisterModel
@{
    ViewData["Title"] = "Register";
	Layout = "/Views/Shared/_Layout.cshtml";
}
	<link href="~/css/plugins.bundle.css" rel="stylesheet" type="text/css" />
	<link href="~/css/style.bundle.css" rel="stylesheet" type="text/css" />
<div class="d-flex log_mt flex-column flex-column-fluid bgi-position-y-bottom position-x-center bgi-no-repeat bgi-size-contain bgi-attachment-fixed" style="background: url(../../images/Reg_back.png) no-repeat">
			<div class="d-flex flex-center flex-column flex-column-fluid p-10 pb-lg-20">
				<div class="w-lg-600px bg-body rounded shadow-sm p-10 p-lg-15 mx-auto">
					 <form id="registerForm" asp-route-returnUrl="@Model.ReturnUrl" method="post">
						<div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>						
					<div class="mb-10 text-center">
							<h1 class="text-dark mb-3">Create an Account</h1>
							<div class="text-gray-400 fw-bold fs-4">
								Already have an account?								
						<button type="button" id="btnLogi" class="link-primary fw-bolder" style="background: transparent; border: 0px;">Sign in here</button>
							</div>
						</div>
						<button type="button" class="btn btn-light-primary fw-bolder w-100 mb-10">
							<img alt="Logo" src="~/images/google-icon.svg" class="h-20px me-3" />Sign in with Google
						</button>
						<div class="d-flex align-items-center mb-10">
							<div class="border-bottom border-gray-300 mw-50 w-100"></div>
							<span class="fw-bold text-gray-400 fs-7 mx-2">OR</span>
							<div class="border-bottom border-gray-300 mw-50 w-100"></div>
						</div>
						<div class="row fv-row mb-7">					
							<div class="col-xl-6">
								<input asp-for="Input.Role" class="form-control" aria-required="true" hidden />							
								<label asp-for="Input.FirstName" class="form-label fw-bolder text-dark fs-6">First Name</label>
								<input asp-for="Input.FirstName" class="form-control form-control-lg form-control-solid" type="text" placeholder="" aria-required="true" autocomplete="firstname" />
							</div>
							<div class="col-xl-6">
								<label asp-for="Input.LastName" class="form-label fw-bolder text-dark fs-6">Last Name</label>
								<input asp-for="Input.LastName" class="form-control form-control-lg form-control-solid" type="text" placeholder="" aria-required="true" />							
							</div>
						</div>	
						<div class="fv-row mb-7">
							<label asp-for="Input.Email" class="form-label fw-bolder text-dark fs-6">Email</label>
							<input asp-for="Input.Email" class="form-control form-control-lg form-control-solid" type="email" placeholder="" autocomplete="username" aria-required="true" />
							<span asp-validation-for="Input.Email" class="text-danger"></span>
						</div>					
						<div class="mb-10 fv-row" data-kt-password-meter="true">
							<div class="mb-1">
								<label asp-for="Input.Password" class="form-label fw-bolder text-dark fs-6">Password</label>
								<div class="position-relative mb-3">
									<input asp-for="Input.Password" class="form-control form-control-lg form-control-solid" autocomplete="new-password" aria-required="true"/>								
								<div class="d-flex align-items-center mb-3" data-kt-password-meter-control="highlight">
									<div class="flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2"></div>
									<div class="flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2"></div>
									<div class="flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2"></div>
									<div class="flex-grow-1 bg-secondary bg-active-success rounded h-5px"></div>
								</div>								
							</div>
							</div>
							<div class="text-muted">Use 8 or more characters with a mix of letters, numbers &amp; symbols.</div>
						</div>			
						<div class="fv-row mb-5">
							<label asp-for="Input.ConfirmPassword" class="form-label fw-bolder text-dark fs-6">Confirm Password</label>
							<input asp-for="Input.ConfirmPassword" class="form-control form-control-lg form-control-solid" autocomplete="new-password" aria-required="true"/>
						</div>					
						<div class="text-center">
							<button id="registerSubmit" type="submit" class="w-100 btn btn-lg btn-primary">Register</button>
							</div>					
					</form>
				</div>
			</div>	
	</div>
	<script>var hostUrl = "assets/";</script>
	<script src="~/js/plugins.bundle.js"></script>
	<script src="~/js/scripts.bundle.js"></script>
	<script src="~/js/generalr.js"></script>
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
   <script>
		$("#btnLogi").click(function () {
			var currLoc = $(location).attr('href'); oc = $(location).attr('href');
			console.log("here I am");
               var url = currLoc.slice(window.location.href.indexOf('?') + 1).split('&');
               console.log(url)
               var returnUrl = "";
               var role = "";
               for (var i = 0; i < url.length; i++) {
                  var urlparam = url[i].split('=');
                  console.log(urlparam[0] === "role")
                  if (urlparam[0] === "ReturnUrl") {
                     returnUrl = urlparam[1]
                  }
                  if (urlparam[0] === "role") {
                     role = urlparam[1]
                     console.log(role)
                  }
               }
               var qstring = "";
               console.log(role.length)
               if (returnUrl.length > 0) {
                  qstring = 'ReturnUrl=' + returnUrl;
                  console.log(qstring)
               }
               if (role.length > 0) {
                  qstring = 'role=' + role;
                  console.log("role st")
                  console.log(qstring)
               }

               window.location = '/Identity/Account/Login?' + qstring;
            })
   </script>
}