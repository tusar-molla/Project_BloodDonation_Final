@page
@model LoginModel
@{
    ViewData["Title"] = "Log in";
   Layout = "/Views/Shared/_Layout.cshtml";
}
	<link href="~/css/plugins.bundle.css" rel="stylesheet" type="text/css" />
	<link href="~/css/style.bundle.css" rel="stylesheet" type="text/css" />
<div class="d-flex flex-column flex-root log_mt" >
		<div class="back_pic d-flex flex-column flex-column-fluid bgi-position-y-bottom position-x-center
bgi-no-repeat bgi-size-contain bgi-attachment-fixed" style="background: url(../../images/Reg_back.png) no-repeat">
      <div class="d-flex flex-center flex-column flex-column-fluid p-10 pb-lg-20">
				<div class="w-lg-500px bg-body rounded shadow-sm p-10 p-lg-15 mx-auto">

					<form class="form w-100" id="kt_sign_in_form account" method="post">
						<div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>
						<input hidden asp-for="Input.Role" class="form-control" aria-required="true" />				
						<div class="text-center mb-10">					
							<h1 class="text-dark mb-3">Sign In to MediHelp</h1>				
							<div class="text-gray-400 fw-bold fs-4">
								New Here?
                     <button type="button" id="btnRegi" class="link-primary fw-bolder" style="background: transparent; border: 0px;">Create an Account</button>
                  </div>
						</div>
						<div class="fv-row mb-10">
							<label asp-for="Input.Email" class="form-label fs-6 fw-bolder text-dark">Email</label>
							<input asp-for="Input.Email" class="form-control form-control-lg form-control-solid" type="text" autocomplete="username" aria-required="true"/>
							<span asp-validation-for="Input.Email" class="text-danger"></span>							
						</div>
						<div class="fv-row mb-10">				
							<label asp-for="Input.Password" class="form-label fs-6 fw-bolder text-dark">Password</label>															
							<input asp-for="Input.Password" class="form-control form-control-lg form-control-solid" autocomplete="current-password" aria-required="true" />
								<span asp-validation-for="Input.Password" class="text-danger"></span>			
						</div>
						<div class="fv-row mb-10">
							<label asp-for="Input.RememberMe" class="form-label">
								<input class="form-check-input" asp-for="Input.RememberMe" />
								@Html.DisplayNameFor(m => m.Input.RememberMe)
							</label>
						</div>					
						<button type="submit" id="kt_sign_in_submit login-submit" class="btn btn-lg btn-primary w-100 mb-5">
								<span class="indicator-label">Continue</span>
								<span class="indicator-progress">
									Please wait...
									<span class="spinner-border spinner-border-sm align-middle ms-2"></span>
								</span>
							</button>
							<div class="text-center text-muted text-uppercase fw-bolder mb-5">or</div>			
							<a href="#" class="btn btn-flex flex-center btn-light btn-lg w-100 mb-5">
								<img alt="Logo" src="~/images/google-icon.svg" class="h-20px me-3" />Continue with Google
							</a>					
					</form>
						</div>										
				</div>
			</div>	
		</div>
	<script>var hostUrl = "assets/";</script>
	<script src="~/js/plugins.bundle.js"></script>
	<script src="~/js/scripts.bundle.js"></script>
	<script src="~/js/general.js"></script>
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
	 <script>
      $("#btnRegi").click(function () {
         var currLoc = $(location).attr('href'); oc = $(location).attr('href');       
         console.log("here I am");
         var url = currLoc.slice(window.location.href.indexOf('?') + 1).split('&');
         console.log(url)
         var returnUrl = "";
         var role = "";
         debugger;
         for (var i = 0; i < url.length; i++) {
            var urlparam = url[i].split('=');
            console.log(urlparam[0] === "role")
            if (urlparam[0] === "ReturnUrl") {
               returnUrl = urlparam[1]
            }
            if (urlparam[0] === "role") {
               role = urlparam[1]
               console.log(role)
            }
         }
         var qstring = "";
         console.log(role.length)
         if (returnUrl.length > 0) {
            qstring = 'ReturnUrl=' + returnUrl;
            console.log(qstring)
         }
         if (role.length > 0) {
            qstring = 'role=' + role;
            console.log("role st")
            console.log(qstring)
         }
         window.location = '/Identity/Account/Register?' + qstring;
      })
	 </script>
}
